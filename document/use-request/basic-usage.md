---
outline: deep
---

# 基础用法
介绍 [useRequest](/api-reference/hooks/use-request/home.md) 的基础用法

## 默认请求

组件初始化的时候会默认执行（可以设置 [manual](/api-reference/hooks/use-request/request-options.md#manual) 为 `true` ,改为手动执行）


第一个参数接受一个异步函数(必须是通过[NormAxios](/document/norm-axios/home.md)定义的异步函数)

[useRequest](/api-reference/hooks/use-request/home.md) 会自动管理 `data`、`rawData`、`response`、`error`、`loading` 状态

```typescript
const { data, rawData, response, error, loading } = useRequest(server)
```

::: demo
use-request/basic-usage
https://play.vuejs.org/#eNp9VMFu00AQ/ZXBlyZSYkcqp8iJKKVIcICq9IY5GHuSbmPvLt51ksrKgRMICThBJU78AAgJBBzo35ConPgFxrtN7EQ0Pli7M+M3b+Y9uXD2pHTHOTpdx1dRxqQGhTqXkIR82AscrQKnH3CWSpFp0GcSoYAjVFJwhfuCa+QaZjDIRAo7XGRpO5wyoXZWnxSQKzzCZzmqawoDHhGYhlCd8WhvEjINPXuBRsqShCmkgrgLPE+fYtaEXh84TuCQoCjXyFCJZIxlmKgfsxRFrpfRFtQgms2ym+fB5Zsf87fv589fLN59Wbz+vGQwRH03HOGdUIcVBdOvCDiALSLg+vDdzW34lmafEB4TErpcTBrNFuQ8xgHjGD8psUIzZzVyY7fT6RA9IHydZ3yzTcBn1aYKiIliCxIRxowPaa292pYbtTEI0fesrqQiXTSmMiFWdAPwYzY2BzpKGLfZgBS/cYVqdC9TAIvz73/Ovy1efv3760Nhm8OM+JgPPVmHwERZ7PKZv/p4eXHx++cn13XXq33Ptva9GiGn5VjTtNNQuqdKcHKl2XxwlSAzdq0WZaxyURkOnBOtpep6Xs7laOhGIvWqiltlD6U9VKnHSIkp4QdOawm1FWUNIGb0MhE3ZdyglCC0jRnx14oUGrDhBntCkSzB7KHUjBRcmyJMEjG5b2I6y3FFKTrBaPSf+KmaWqKHZBHMxlgbQ4cZiW/TB48e4JTOq2Qq4jyh6i1JsrJI8pKjLbtNpiXa9UWVbO8ZMcgjx+pgSu5Uy6FKomYbpj5w6Meyv2X0iu6ue3O1xdk/HMqafQ==
:::

## 手动执行

手动执行异步函数，[run](/api-reference/hooks/use-request/request-method.md#run) 函数的参数与传入的异步方法参数一致。

::: demo
use-request/manual-execution
https://play.vuejs.org/#eNp9VE1v00AQ/SuDOTSVUruIVkgmrVpKkeAAVekNc9jY03Qbe3fx7iapohw4QcvXCSpxghNcQEgg4ED/DYnKib/A2Js0boHmYO3Ozr55781O+t6qUn7Hohd6DR3nXBnQaKyClInWUuQZHXnLkeCZkrkBs6cQ+rCJWkmhcU0Kg8LAALZzmcGMkHk2x3pc6pmTK32wGjfxgUX9n8RIxARmgOk9Ea92GTew5DZQy3iaco2UkIQgbNbEfBaWlkFgFzYIis5qOWqZdrAIE/UtnqG0ZhKtQwVidraoFgRw/Pzb8MWr4cNHo5efRs8+Thi00NxgbbzODJtSELJ7qnQ/EgAun2pUfQjPGtNw15YJ7B7B1MGKBLe5wOR+AcJKrVPZtcX5eWIIhGtsLs7CR2IwNasPCbGsQypZwkWrDrkVZO9Sxe1aRU7d0c6YsCwNweQW64RH1RqBazs1mTYGM5Uyg7QDaCS8Uy5oqaAzx7fpQVwYVyyfRXEEMDr8+uvwy+jx598/XvcdMRgQ1/JioKoQmGqHXfyGB2+Oj45+fv/g+/5f2U1rjBSwEqc8blNd0lcjJeiTkTVqZKX8/pPhwfvR/rvjt08nMO62UxE4GY2gIo622uylCDqWChOKjOuVNjVZ3G7lkroVwsVFvMKwedV1PZV5CN0dbrAMNGWeIEWEFC6gWFKYE8Ki6sEl+lTS5nIyzuoQFsowGUTeFySoulf33LzMZUz5u1oKGsiSSzQ+oDkMHbsiNh2gIhx5O8YoHQaBFard8mOZBdOMlUKzNgHqLOD0AHuEH3nUfgd1LsopgITTp4z4GRclSgFCQgbE35CVYpu3zrAnFMVTzO8ow+nlnlLB0lR2b5Wx8Yt08XgH4/Y/4ru654hu0Ghg3sGKDMNyeu/ueP3ubezR+uQwk4lNKfucQxpdmdqCo0u7Rt0n2lWjCrY3y2ZQi7f0eo+mUk9EFURLN8r8yKP/1LVzpE/pXvYXTlwc/AGC+fOQ
:::


## 刷新

重复上次请求，会自动使用上一次的请求参数

::: demo
use-request/refresh
https://play.vuejs.org/#eNp9VE1v00AQ/SuDOZBIiV0EFZJJK74lOEAF3DCHjT1Jlti7y+46SRXlwAlavk60Eic4wQVUCUQ50H9DonLiLzD2to1b2vpged/MvnnzdtZj76pS/iBHL/RaJtZcWTBocwUpE92lyLMm8pYjwTMltQW7qhDGcB+NksLgdSksCgsT6GiZwTkhddZkIy7NuYMtY8gN3senOZoTEiMRE5kFZlZFfHXIuIUlt4BaxtOUG6SEJASRZ23UdVhaBoFDWCEqitU0GpkOsIBJ+kOeocztPtqACkW9XlQLAth9sz19uzF99nz2bmv2+uu+gi7aW6yPN5hlcwlCDg+VHkcCwOVTjaoP4VFjWm7bMpE9IpoG5CLBDheYPC5IWNnrvO3a4sICKQTitbkWR+kjMZmbNYaEVDYglSzhotsAnQt6YYc29cjnpYrttUpfDaefZLA8tStMs8yE8IhC6JPEWv1xg+qQilbgxoEOnxYWM5VSDq0AWgkflB/0qWDQ5B0alDN7SspxKUIAs80ffza/z158+/vr/dgJhgn1UG4MVJUCU+O4i2e6/mF3Z+f3zy++7/+X3c6tlQKuxCmP+1SX+q7N1der5ddeTtc/z9Y+7X58tU/jdp/I5eyrVVmmL7ZnG1vH7G8FzoZWUDGHlsaupggmlgoTQvZqlK63WdzvaklTEMLZRbzEsH3ZTVMqdQjDHrdYAm2pEyRESOEAxZLC3BAW1QjO06uS1tRkfE6neHEPzpjuctHUvNujmTy/UMLkOx1poY1EeQ3PXc9mxpT/xEhB97+UGO0F6NqHTnSBze9rAUdez1plwiDIhep3/VhmwTzjSmGFsQGaLOA07yPijzyaKkd1KsshgoTTq0T8jIuSpSChRiak35LDosO7R9QTi+Ip6nvKcrooh7pgaSqHd0rM6hwPJMU9jPvH4E/MyAldoalAPcBKG5Y8RuvCNx/cxRF9HwQzmeQpZZ8SpD+FTPNCo0u7RkNBsqtGFWpvl4dBJ//Q3BzRT8DsN1UILd0o8yOPfuHXT2l9LveCf/HAxck/t4MZRw==
:::


## 默认参数

[默认请求](#默认请求)会自动携带上`默认参数`

通过 [defaultParams](/api-reference/hooks/use-request/request-options.md#defaultparams) 配置默认参数

::: demo
use-request/default-params
https://play.vuejs.org/#eNp9VL1uE0EQfpXhmtiScxcpVJYdEUKQoIAopMulWHxjZ5P943bXdmS5oAIhARVEouIFQEggoCBvQ6xQ8QrM3cb22SJ2Ye3OzH7zzTefbhRtGxP3PUbNqGU7OTcOLDpvQDDVa6eRs2m0lSoujc4duDODMIJ9tEYriztaOVQOxtDNtYQ1pXO5zoZc27XZkxF4i/v4zKO9oTBVHQJzwOyZ6mwPGHfQDheoSS4Et0gFWROUl08xr0N7CxQOYI+gKFfL0WrRxyJM1A+4RO3dNNqACkS9XnRLErh68+Py7fvL5y8m775MXn+eMuihu89O8R5zbE5B6cFC61GqAEI99ajq0FwWphWebRHYIcE0wKsMu1xhdlSAsHLW+di1zY2NDaIIBOx8rpbxUzWeqzWCjGg2QGiWcdUjadsVpWuVURqBMnVmXrg9ljNpm3BIKYyJVa1+1CBk6ttKggNo33RxKI2gGroBtDLeLw90NNBf513yxq3r3qVDihTA5Pz7n/Nvk5df//76MAoUYUysy4eJqUKgsAG7+F2++nh1cfH756c4jherW0lo3UoqhKJGFOy1LpmJT6xW5N9yyvQ6QbZthrmL2NxvRTiNjp0ztpkkXpnTXtzRMplX3Cl6WJeglQmnfQ0JP41IogC1EmUBIOP0V0ZiyVWJUoCQGmPi7yztsct7S+wJxXCB+WPjOO15YQomhB48LGMu9zij1DnGzul/4id2GIjukZEw72NlDMdyskhI7z55hEM6z5JSZ15Q9YokOV0LX3AMZXfJ2kS7KlTB9kG5DPLIgd0dkoftdKiCaKlGWZ9G9AnaWTH6nO5mfHum4vgfEkappw==
:::


## 初始数据

[data](/api-reference/hooks/use-request/request-state.md#data) 的初始数据，通过 [initialData](/api-reference/hooks/use-request/request-options.md#initialdata) 配置

::: demo
use-request/initial-data
https://play.vuejs.org/#eNp9VL1uE0EQfpXhGmzJuYsUqpMdEUKQoIAopOMoFt/Y2WT/uN21HVkuqEBIQAWRqHgBEBIIKMjbECtUvAKzt0l8jiAuTrszs998880nT5MNY9KRxyRPurZfcePAovMGBFPDXpE4WyTrheLS6MqBOzQIU9hBa7SyuKmVQ+VgBoNKS7iudCVX2IRre/3iyRS8xR186tH+p7BQfQJzwOyh6m+MGXfQixdoSS4Et0gFZQ7KyydYtaG3DgrHsE1QlGtVaLUYYQgT9V0uUXt3Hu1AA6LdDt2yDE5ffz958+7k2fP528/zV5/OGQzR3WEHeJs5tqCg9Hip9bRQALGeejR1yC8L043P1gnsEcF0wKsSB1xh+TiAsHrWxdittdXVVaIIBOx8pS7jF2q2UGsKJdHsgNCs5GpI0vYaSrcao3QiZa6440yESA70xZQotdqdkJNMeSZycJVHCsyIRDeLdqDl08WhNILe0A2gW/JRfaCjgdEKH5BRrp0Rqe0SUgDzo2+/j77OX3z58/P9NPKFGY1QP8xMEwKFjdjhd/Lyw+nx8a8fH9M0Xa7uZrF1N2sQSjpJ9NqKZCbdt1qRmeuRi7MEeTiPIoTYwnwhXCR7zhmbZ5lX5mCY9rXMFhU3Qw/rMrQy47S8CeEXSa1ZgLoSZQmg5PSpI6nkqkYJIKTGjPg7S0sd8OEl9oRiuMDqgXGclr40BRNCj+/VsbOtxXh/D/sH/4jv20kkuk2uwmqEjTEcq8gvMb318D5O6HyRlLr0gqqvSJLttfCBYyy7RT4n2k2hAtu79TLII7t2a0KGtudDBaK1GnV9kdD/0eYVoy/orqU3LlSc/QVHg63Y
:::

## 生命周期

* [onBefore](/api-reference/hooks/use-request/request-options.md#onbefore)：请求前触发
* [onSuccess](/api-reference/hooks/use-request/request-options.md#onsuccess)：请求成功触发
* [onError](/api-reference/hooks/use-request/request-options.md#onerror)：请求失败触发
* [onFinally](/api-reference/hooks/use-request/request-options.md#onfinally)：最后执行,不管 service 成功失败都会执行

::: demo
use-request/life-cycle
https://play.vuejs.org/#eNqVVV9vG0UQ/yrD8eCz5NylohHSYUf9QyrBA1Rt3zAPl7uxs/Xd7rG7Zzsylmh5oElIUySgokKUSED7QkNERYtoxJfxuc4TX4G5W/9L5VqqH067s7O/+c1vZtY962KSOO0ULc+qqkCyRINCnSYQ+bxZq1ta1a31OmdxIqQGvZ0g9OAaqkRwhZcF18g19KEhRQwlLmS84neZUKXplR6kCq/hZymq1zjWeUBgGny1zYOLHZ9pqJkN2DGLIqaQHEIPeBpvoixDbR04duAqQdGZLVGJqI25majfYDGKVE+sFZiDKJfzaK4Lo7vPsoPvs1tfDb/7Y7j/ZMKgifqK38L3fe3PKHDRmYSGz0FpyXiz7E2iV1/Romo819dzOr06B/CLjGbJ2WurqwUPANYAO5dUNICiQK1Wg5IJUCqDpDJIDp/wNIoqJGOsmh6UsoPbxPnl8T/ZT3un3/4wOjoqVSAQIXpwfnUV+p/muNOrolOBlIfYYBxDOurP1O5BSGlWAKUUsgKR8EOKWwGZcvpgg/TbonrV5spnz+lDjPJIgl/ChpBoJ770Y1U2ViBGnORHJxJNuzQ6ejY8vj34ey/b2R89+i07+KZEAgD0KwbiehoEqJRtCBmknIMRdhnm8M69bPfhIsyNPC17nNybQGa/HI+e/roI8grjfhRtL011+OMX2b27w51Ho8OvK4Pn+y+fHFJTyjYLEAxZg3/65cngxQPjN4vSp1XVNWNIQ0cbjXES+RppB1ANWbtY0DKB9gpr0IC+Na5cMab5EcDw/l+n958O7/z534sHPVNn6FPpi4tuMg+BkTLY+S/b/Xl0cjJ4/rvjOAu9i4CFpnPRTBcO/j0c3joyAQsPh/p1UdTNVGvB4UIQsaBFcNRvNjUUOtSsNg3oXBo7e9nuY6PRBMbcXoZVGk/FGaTHh8O9h+ZgAVLVNcJW3Tm5aav0dpQvx2GKem/6QaspBQ2VB2+v4bs+br6X2wMRCelBZ4tpLAybQoZIFi64MSR+mNfJg7WkC+foM+e2IqmGqaIZHptjXzYZX5GsuaU9OLdamElM6o4xKatimRd2JfYT56YSnJ7wgmJ9fEAvtzdp0ro1e3Jzc93a0jpRnuumPGk1nUDE7szjQq6B0i6q2GX0fHQJv24VY5BDLUU5AxAy+hQWJ2a8QCl6nXIh/lrR7DRY8xX2hJKwCOXHiWY0W2eyoAEUnQ8Lm5YpTikFWxi0Fthvqq4hepVmn+YQ59LQpDFqc7xx/SPs0np6GIswjch7ySG9/CJKc47G7RI1BdGeFypn+0FRDKr8DbXRpb8INUkqJzp7X+oW/QtfXpL6jO47zvmpiv3/AaCl3fM=
:::






